<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="report_deliveryslip_inherit_airflow" inherit_id="stock.report_deliveryslip">
        <!-- Set flag to use in report footer -->
        <xpath expr="//t[@t-foreach='docs']" position="before">
            <t t-set="is_deliveryslip" t-value="True"/>
        </xpath>
    </template>

    <template id="address_layout_inherit_airflow" inherit_id="web.address_layout">
        <xpath expr="//div[hasclass('address','row')]" position="before">
            <t t-if="xmlid == 'stock.report_deliveryslip'">
                <div class="row mt16 mb16">
                    <div class="col-8">
                        <h5>
                            <span>Project Name:</span>
                            <span t-field="o.proj_name"/>
                        </h5>
                        <h5>
                            <span>Ship Attn To:</span>
                            <span t-field="o.ship_attn"/>
                        </h5>
                        <h5>
                            <span>Customer PO:</span>
                            <span t-field="o.cust_po"/>
                        </h5>
                    </div>

                    <div class="col-4 pull-right">
                        <div>
                            <span>Sales Rep:</span>
                            <span t-field="o.sales_rep"/>
                        </div>
                        <div>
                            <span>Email:</span>
                            <span t-esc="o.sales_rep.email" t-options='{"widget": "email"}'/>
                        </div>
                        <div>
                            <span>Phone:</span>
                            <span t-esc="o.sales_rep.phone" t-options='{"widget": "phone"}'/>
                        </div>

                    </div>
                </div>
            </t>
        </xpath>

        <xpath expr="//div[hasclass('address','row')]" position="replace">
            <!-- added t-if/t-else to make changes particular to delivery slip only -->
            <t t-if="xmlid == 'stock.report_deliveryslip'">
                <t t-set="partner" t-value="o.partner_id or (o.move_lines and o.move_lines[0].partner_id) or False"/>
                <t t-set="parent" t-value="(partner and partner.parent_id) or partner or False"/>
                <div class="row mt16 mb16" name="customer_address">
                    <div class="col-8">
                        <div>
                            <span>
                                <strong>Ship To Address:</strong>
                            </span>
                        </div>
                        <div t-if="partner" name="ship_to_address">
                            <span t-esc="partner.parent_id.name if partner.parent_id else partner.name"/>
                            <div t-esc="partner"
                                 t-options='{"widget": "contact", "fields": ["address", "phone"], "no_marker": True}'/>
                        </div>
                    </div>
                    <div class="col-4 pull-right">
                        <div>
                            <span>
                                <strong>Customer Address:</strong>
                            </span>
                        </div>
                        <div t-if="parent" name="customer_address">
                            <span t-esc="partner.parent_id.name if partner.parent_id else partner.name"/>
                            <div t-esc="parent"
                                 t-options='{"widget": "contact", "fields": ["address", "phone"], "no_marker": True}'/>
                        </div>
                    </div>
                </div>
            </t>
            <t t-else="">
                <t t-if="information_block">
                    <t t-set="colclass" t-value="'col-5 offset-1'"/>
                    <div name="information_block" class="col-6">
                        <t t-raw="information_block"/>
                    </div>
                </t>
                <div name="address" t-att-class="colclass">
                    <t t-raw="address"/>
                </div>
            </t>
        </xpath>

        <xpath expr="//t[@t-set='colclass']" position="replace"/>

        <!-- Add origin after name -->
        <xpath expr="//div[@name='address']" position="after">
            <span class="origin" t-if="o.origin" t-field="o.origin"/>
        </xpath>
    </template>
</odoo>
